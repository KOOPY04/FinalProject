import{r as a,a as B,H as N,L as K,T as de,E as fe}from"./antd-DwruK9z9.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();var q={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he=a,me=Symbol.for("react.element"),ge=Symbol.for("react.fragment"),pe=Object.prototype.hasOwnProperty,xe=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ve={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,t,r){var n,l={},o=null,h=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(h=t.ref);for(n in t)pe.call(t,n)&&!ve.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)l[n]===void 0&&(l[n]=t[n]);return{$$typeof:me,type:e,key:o,ref:h,props:l,_owner:xe.current}}Z.Fragment=ge;Z.jsx=Q;Z.jsxs=Q;q.exports=Z;var i=q.exports,ee,U=B;ee=U.createRoot,U.hydrateRoot;var te={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},W=N.createContext&&N.createContext(te),ye=["attr","size","title"];function we(e,t){if(e==null)return{};var r=be(e,t),n,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)n=o[l],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function be(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J(Object(r),!0).forEach(function(n){je(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function je(e,t,r){return t=Ne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e){var t=Ce(e,"string");return typeof t=="symbol"?t:t+""}function Ce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function re(e){return e&&e.map((t,r)=>N.createElement(t.tag,A({key:r},t.attr),re(t.child)))}function k(e){return t=>N.createElement(Ee,D({attr:A({},e.attr)},t),re(e.child))}function Ee(e){var t=r=>{var{attr:n,size:l,title:o}=e,h=we(e,ye),m=l||r.size||"1em",g;return r.className&&(g=r.className),e.className&&(g=(g?g+" ":"")+e.className),N.createElement("svg",D({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,h,{className:g,style:A(A({color:e.color||r.color},r.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&N.createElement("title",null,o),e.children)};return W!==void 0?N.createElement(W.Consumer,null,r=>t(r)):t(te)}function Se(e){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M16 16V12L21 17L16 22V18H4V16H16ZM8 2V5.999L20 6V8H8V12L3 7L8 2Z"},child:[]}]})(e)}function Oe(e){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 3H20C20.5523 3 21 3.44772 21 4V11H3V4C3 3.44772 3.44772 3 4 3ZM3 13H21V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V13ZM7 16V18H10V16H7ZM7 6V8H10V6H7Z"},child:[]}]})(e)}function ke(e){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function Me(e){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function _e(e){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 9.5C12.8284 9.5 13.5 8.82843 13.5 8C13.5 7.17157 12.8284 6.5 12 6.5C11.1716 6.5 10.5 7.17157 10.5 8C10.5 8.82843 11.1716 9.5 12 9.5ZM14 15H13V10.5H10V12.5H11V15H10V17H14V15Z"},child:[]}]})(e)}function Le(e){return k({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M6 8h-6v-6h1v4.109c1.013-3.193 4.036-5.484 7.5-5.484 3.506 0 6.621 2.36 7.574 5.739l-0.963 0.271c-0.832-2.95-3.551-5.011-6.611-5.011-3.226 0.001-6.016 2.276-6.708 5.376h4.208v1zM11 9v1h4.208c-0.693 3.101-3.479 5.375-6.708 5.375-3.062 0-5.78-2.061-6.611-5.011l-0.963 0.271c0.952 3.379 4.067 5.739 7.574 5.739 3.459 0 6.475-2.28 7.5-5.482v4.108h1v-6h-6z"},child:[]}]})(e)}function Pe(e){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 16C123.45 16 16 123.45 16 256s107.45 240 240 240 240-107.45 240-240S388.55 16 256 16zm0 60c99.41 0 180 80.59 180 180s-80.59 180-180 180S76 355.41 76 256 156.59 76 256 76zm-80.625 60c-.97-.005-2.006.112-3.063.313v-.032c-18.297 3.436-45.264 34.743-33.375 46.626l73.157 73.125-73.156 73.126c-14.63 14.625 29.275 58.534 43.906 43.906L256 299.906l73.156 73.156c14.63 14.628 58.537-29.28 43.906-43.906l-73.156-73.125 73.156-73.124c14.63-14.625-29.275-58.5-43.906-43.875L256 212.157l-73.156-73.125c-2.06-2.046-4.56-3.015-7.47-3.03z"},child:[]}]})(e)}function He(e){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 16l-4 4"},child:[]},{tag:"path",attr:{d:"M7 12l5 5l-1.5 1.5a3.536 3.536 0 1 1 -5 -5l1.5 -1.5z"},child:[]},{tag:"path",attr:{d:"M17 12l-5 -5l1.5 -1.5a3.536 3.536 0 1 1 5 5l-1.5 1.5z"},child:[]},{tag:"path",attr:{d:"M3 21l2.5 -2.5"},child:[]},{tag:"path",attr:{d:"M18.5 5.5l2.5 -2.5"},child:[]},{tag:"path",attr:{d:"M10 11l-2 2"},child:[]},{tag:"path",attr:{d:"M13 14l-2 2"},child:[]},{tag:"path",attr:{d:"M16 16l4 4"},child:[]}]})(e)}function Ve(e){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 12l5 5l-1.5 1.5a3.536 3.536 0 1 1 -5 -5l1.5 -1.5z"},child:[]},{tag:"path",attr:{d:"M17 12l-5 -5l1.5 -1.5a3.536 3.536 0 1 1 5 5l-1.5 1.5z"},child:[]},{tag:"path",attr:{d:"M3 21l2.5 -2.5"},child:[]},{tag:"path",attr:{d:"M18.5 5.5l2.5 -2.5"},child:[]},{tag:"path",attr:{d:"M10 11l-2 2"},child:[]},{tag:"path",attr:{d:"M13 14l-2 2"},child:[]}]})(e)}const Re=()=>{const e=t=>{const r=t.currentTarget.getAttribute("title");console.log(`Button clicked: ${r}`)};return i.jsxs("div",{className:"flex flex-row items-center space-x-5 bg-gray-500 border border-white",children:[i.jsx("div",{className:"flex items-center",children:i.jsx("button",{title:"站台管理員",onClick:e,children:i.jsx(Oe,{className:"w-12 h-12 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#87A2FF"})})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{title:"連線紀錄",onClick:e,children:i.jsx(_e,{className:"w-12 h-12 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#ffc800"})}),i.jsx("button",{title:"切換本地目錄樹",onClick:e,children:i.jsx(ke,{className:"w-12 h-12 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#7acf6a"})}),i.jsx("button",{title:"切換遠端目錄樹",onClick:e,children:i.jsx(Me,{className:"w-12 h-12 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#87A2FF"})}),i.jsx("button",{title:"檔案傳輸過程",onClick:e,children:i.jsx(Se,{className:"w-12 h-12 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#5ba4a4"})})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{title:"重新整理檔案及資料夾",onClick:e,children:i.jsx(Le,{className:"h-9 w-9 lg:w-16 lg:h-16 md:w-12 md:h-12",color:"#99ff99"})}),i.jsx("button",{title:"取消檔案動作",className:"ml-2 lg:ml-4 md:ml-3",onClick:e,children:i.jsx(Pe,{className:"w-10 h-10 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#cc0000"})}),i.jsx("button",{title:"連接伺服器",className:"ml-1 md:ml-2",onClick:e,children:i.jsx(Ve,{className:"w-10 h-10 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#99ff33"})}),i.jsx("button",{title:"中斷伺服器",className:"-ml-1 md:-ml-2",onClick:e,children:i.jsx(He,{className:"w-10 h-10 lg:w-20 lg:h-20 md:w-16 md:h-16",color:"#ff6600"})})]})]})},Te=({setMessage:e})=>{const[t,r]=a.useState("127.0.0.1"),[n,l]=a.useState(""),[o,h]=a.useState(""),[m,g]=a.useState("50051"),C=async()=>{if(window.pywebview){if(t===""||m===""||n===""||o===""){e("請輸入完整資訊");return}const u=await window.pywebview.api.login(t,m,n,o),y=JSON.parse(u);"error"in y?e(y.error):e(y.message)}else e("請在pywebview環境下使用")};return i.jsxs("div",{className:"flex flex-wrap items-center justify-start p-2 bg-gray-500 border border-white gap-7",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"host",className:"mr-1 text-sm text-white whitespace-nowrap",children:"主機(H):"}),i.jsx("input",{type:"text",id:"host",className:"px-2 py-1 text-sm border border-gray-300 rounded w-28 focus:outline-none focus:ring-1 focus:ring-cyan-500",value:t,onChange:u=>r(u.target.value)})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"username",className:"mr-1 text-sm text-white whitespace-nowrap",children:"使用者名稱(U):"}),i.jsx("input",{type:"text",id:"username",className:"px-2 py-1 text-sm border border-gray-300 rounded w-28 focus:outline-none focus:ring-1 focus:ring-cyan-500",value:n,onChange:u=>l(u.target.value)})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"password",className:"mr-1 text-sm text-white whitespace-nowrap",children:"密碼(W):"}),i.jsx("input",{type:"password",id:"password",className:"px-2 py-1 text-sm border border-gray-300 rounded w-28 focus:outline-none focus:ring-1 focus:ring-cyan-500",value:o,onChange:u=>h(u.target.value)})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"port",className:"mr-1 text-sm text-white whitespace-nowrap",children:"連接埠(P):"}),i.jsx("input",{type:"number",id:"port",className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-cyan-500",value:m,onChange:u=>g(u.target.value)})]}),i.jsx("button",{className:"px-3 py-1 text-sm text-white bg-blue-600 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:C,children:"快速連線(Q)"})]})},Fe=({message:e})=>{const[t,r]=a.useState([]),n=a.useRef(null);return a.useEffect(()=>{r(l=>[...l,e])},[e]),a.useEffect(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[t]),i.jsx("div",{ref:n,className:"w-full h-full p-2 overflow-auto bg-gray-500 border",style:{maxHeight:"400px"},children:i.jsx(K,{dataSource:t,renderItem:(l,o)=>i.jsx(K.Item,{style:{paddingTop:"2px",paddingBottom:"2px"},children:i.jsx("div",{className:"flex items-center w-full h-full px-2 text-white",children:l})},o)})})};function ne(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=ne(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function F(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=ne(e))&&(n&&(n+=" "),n+=t);return n}var ie=a.createContext({}),De=()=>a.useContext(ie),Ae=e=>N.createElement(ie.Provider,{...e});function Ie(){let e=new Map;return{on(t,r){return e.has(t)?e.get(t).add(r):e.set(t,new Set([r])),this},off(t,r){return e.has(t)&&e.get(t).delete(r),this},emit(t,r){return e.has(t)&&e.get(t).forEach(n=>{n(r)}),this}}}var I=Ie(),Ze=()=>a.useRef(new Map).current,$e=()=>{},Y=["resize","contextmenu","click","scroll","blur"],z={show({event:e,id:t,props:r,position:n}){e.preventDefault&&e.preventDefault(),I.emit(0).emit(t,{event:e.nativeEvent||e,props:r,position:n})},hideAll(){I.emit(0)}};function Be(){let e=new Map,t,r,n,l,o=!1;function h(f){l=Array.from(f.values()),t=-1,n=!0}function m(){l[t].node.focus()}let g=()=>t>=0&&l[t].isSubmenu,C=()=>Array.from(l[t].submenuRefTracker.values());function u(){return t===-1?(y(),!1):!0}function y(){t+1<l.length?t++:t+1===l.length&&(t=0),o&&p(),m()}function S(){t===-1||t===0?t=l.length-1:t-1<l.length&&t--,o&&p(),m()}function E(){if(u()&&g()){let f=C(),{node:s,setSubmenuPosition:c}=l[t];return e.set(s,{isRoot:n,focusedIndex:t,parentNode:r||s,items:l}),c(),s.classList.add("contexify_submenu-isOpen"),r=s,f.length>0?(t=0,l=f):o=!0,n=!1,m(),!0}return!1}function p(){if(u()&&!n){let f=e.get(r);r.classList.remove("contexify_submenu-isOpen"),l=f.items,r=f.parentNode,f.isRoot&&(n=!0,e.clear()),o||(t=f.focusedIndex,m())}}function O(f){function s(c){for(let d of c)d.isSubmenu&&d.submenuRefTracker&&s(Array.from(d.submenuRefTracker.values())),d.keyMatcher&&d.keyMatcher(f)}s(l)}return{init:h,moveDown:y,moveUp:S,openSubmenu:E,closeSubmenu:p,matchKeys:O}}function H(e){return typeof e=="function"}function G(e){return typeof e=="string"}function ze(e,t){return a.Children.map(a.Children.toArray(e).filter(Boolean),r=>a.cloneElement(r,t))}function Ke(e){let t={x:e.clientX,y:e.clientY},r=e.changedTouches;return r&&(t.x=r[0].clientX,t.y=r[0].clientY),(!t.x||t.x<0)&&(t.x=0),(!t.y||t.y<0)&&(t.y=0),t}function X(e,t){return H(e)?e(t):e}function Ue(e,t){return{...e,...H(t)?t(e):t}}var le=({id:e,theme:t,style:r,className:n,children:l,animation:o="fade",preventDefaultOnKeydown:h=!0,disableBoundariesCheck:m=!1,onVisibilityChange:g,...C})=>{let[u,y]=a.useReducer(Ue,{x:0,y:0,visible:!1,triggerEvent:{},propsFromTrigger:null,willLeave:!1}),S=a.useRef(null),E=Ze(),[p]=a.useState(()=>Be()),O=a.useRef(),f=a.useRef();a.useEffect(()=>(I.on(e,c).on(0,d),()=>{I.off(e,c).off(0,d)}),[e,o,m]),a.useEffect(()=>{u.visible?p.init(E):E.clear()},[u.visible,p,E]);function s(v,j){if(S.current&&!m){let{innerWidth:w,innerHeight:P}=window,{offsetWidth:R,offsetHeight:T}=S.current;v+R>w&&(v-=v+R-w),j+T>P&&(j-=j+T-P)}return{x:v,y:j}}a.useEffect(()=>{u.visible&&y(s(u.x,u.y))},[u.visible]),a.useEffect(()=>{function v(w){h&&w.preventDefault()}function j(w){switch(w.key){case"Enter":case" ":p.openSubmenu()||d();break;case"Escape":d();break;case"ArrowUp":v(w),p.moveUp();break;case"ArrowDown":v(w),p.moveDown();break;case"ArrowRight":v(w),p.openSubmenu();break;case"ArrowLeft":v(w),p.closeSubmenu();break;default:p.matchKeys(w);break}}if(u.visible){window.addEventListener("keydown",j);for(let w of Y)window.addEventListener(w,d)}return()=>{window.removeEventListener("keydown",j);for(let w of Y)window.removeEventListener(w,d)}},[u.visible,p,h]);function c({event:v,props:j,position:w}){v.stopPropagation();let P=w||Ke(v),{x:R,y:T}=s(P.x,P.y);B.flushSync(()=>{y({visible:!0,willLeave:!1,x:R,y:T,triggerEvent:v,propsFromTrigger:j})}),clearTimeout(f.current),!O.current&&H(g)&&(g(!0),O.current=!0)}function d(v){v!=null&&(v.button===2||v.ctrlKey)&&v.type!=="contextmenu"||(o&&(G(o)||"exit"in o&&o.exit)?y(j=>({willLeave:j.visible})):y(j=>({visible:j.visible?!1:j.visible})),f.current=setTimeout(()=>{H(g)&&g(!1),O.current=!1}))}function b(){u.willLeave&&u.visible&&B.flushSync(()=>y({visible:!1,willLeave:!1}))}function $(){return G(o)?F({[`contexify_willEnter-${o}`]:M&&!V,[`contexify_willLeave-${o} contexify_willLeave-'disabled'`]:M&&V}):o&&"enter"in o&&"exit"in o?F({[`contexify_willEnter-${o.enter}`]:o.enter&&M&&!V,[`contexify_willLeave-${o.exit} contexify_willLeave-'disabled'`]:o.exit&&M&&V}):null}let{visible:M,triggerEvent:x,propsFromTrigger:_,x:ae,y:ce,willLeave:V}=u,ue=F("contexify",n,{[`contexify_theme-${t}`]:t},$());return N.createElement(Ae,{value:E},M&&N.createElement("div",{...C,className:ue,onAnimationEnd:b,style:{...r,left:ae,top:ce,opacity:1},ref:S,role:"menu"},ze(l,{propsFromTrigger:_,triggerEvent:x})))},L=({id:e,children:t,className:r,style:n,triggerEvent:l,data:o,propsFromTrigger:h,keyMatcher:m,onClick:g=$e,disabled:C=!1,hidden:u=!1,closeOnClick:y=!0,handlerEvent:S="onClick",...E})=>{let p=a.useRef(),O=De(),f={id:e,data:o,triggerEvent:l,props:h},s=X(C,f),c=X(u,f);function d(x){f.event=x,x.stopPropagation(),s||(y?b():g(f))}function b(){let x=p.current;x.focus(),x.addEventListener("animationend",()=>setTimeout(z.hideAll),{once:!0}),x.classList.add("contexify_item-feedback"),g(f)}function $(x){x&&!s&&(p.current=x,O.set(x,{node:x,isSubmenu:!1,keyMatcher:!s&&H(m)&&(_=>{m(_)&&(_.stopPropagation(),_.preventDefault(),f.event=_,b())})}))}function M(x){(x.key==="Enter"||x.key===" ")&&(x.stopPropagation(),f.event=x,b())}return c?null:N.createElement("div",{...E,[S]:d,className:F("contexify_item",r,{"contexify_item-disabled":s}),style:n,onKeyDown:M,ref:$,tabIndex:-1,role:"menuitem","aria-disabled":s},N.createElement("div",{className:"contexify_itemContent"},t))};const{DirectoryTree:We}=de,oe="file_menu",se="folder_menu",Je=({isLocal:e})=>i.jsxs(le,{id:oe,children:[i.jsx(L,{onClick:()=>console.log("開啟檔案"),children:"開啟檔案"}),i.jsx(L,{onClick:()=>console.log("刪除檔案"),children:"刪除檔案"}),i.jsx(L,{onClick:()=>console.log(e?"上傳檔案":"下載檔案"),children:e?"上傳檔案":"下載檔案"})]}),Ye=({nodeKey:e,onOpenFolder:t,nodeTitle:r})=>i.jsxs(le,{id:se,children:[i.jsx(L,{onClick:()=>t(e),children:"開啟資料夾"}),i.jsx(L,{onClick:()=>console.log("刪除資料夾"),disabled:r==="根目錄"||r==="downloads",children:"刪除資料夾"}),i.jsx(L,{onClick:()=>console.log("新增檔案"),children:"新增檔案"})]}),Ge=({initialTreeData:e=[{title:"根目錄",key:"root",children:void 0}],isLocal:t,onNodeSelect:r})=>{const[n,l]=a.useState(e),[o,h]=a.useState([]),[m,g]=a.useState(""),[C,u]=a.useState(null);a.useEffect(()=>{h(t?["localStorage"]:["uploads"])},[]);const y=(s,c,d)=>s.map(b=>b.key===c?{...b,children:d}:b.children?{...b,children:y(b.children,c,d)}:b),S=async s=>{try{const c=await(t?window.pywebview.api.get_local_children(s):window.pywebview.api.get_server_children(s)),d=JSON.parse(c);return"error"in d?(console.error("Error:",d.error),[]):d}catch(c){return console.error("Failed to fetch children:",c),[]}},E=async({key:s,children:c})=>c?Promise.resolve():S(s).then(d=>{l(b=>y(b,s,d))}),p=(s,c)=>{s.preventDefault();const d=typeof c.title=="string"?c.title:String(c.title);g(d),u(c.key),c.isLeaf?z.show({id:oe,event:s,props:{node:c}}):z.show({id:se,event:s,props:{node:c}})},O=(s,c)=>{if(r&&s.length>0){const d=s[0],b=c.node;r(d,b)}},f=s=>{h(c=>[...c,s])};return i.jsxs(i.Fragment,{children:[i.jsx(We,{loadData:E,treeData:n,onSelect:O,expandedKeys:o,onRightClick:({event:s,node:c})=>p(s,c),onExpand:s=>h(s)}),i.jsx(Je,{isLocal:t}),C!==null&&i.jsx(Ye,{nodeKey:C,onOpenFolder:f,nodeTitle:m})]})},Xe=(e,t)=>{console.log("Selected node key:",e)},qe=[{title:"根目錄",key:"localStorage",children:void 0}];function Qe(){return i.jsx("div",{className:"h-full px-2 py-1 bg-gray-500 border-2 rounded",children:i.jsx(Ge,{onNodeSelect:Xe,initialTreeData:qe,isLocal:!0})})}const et=()=>i.jsx("div",{className:"h-full px-2 py-1 bg-gray-500 border-2 rounded",children:i.jsx(fe,{})}),tt=()=>i.jsxs("div",{className:"flex flex-row w-full h-full gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx(Qe,{})}),i.jsx("div",{className:"flex-1",children:i.jsx(et,{})})]}),rt=()=>i.jsx("div",{className:"w-full h-full p-2 bg-gray-500 border rounded",children:i.jsx("div",{className:"flex items-center w-full h-full px-4",children:"SendStatus"})}),nt=()=>{const[e,t]=a.useState("");return i.jsxs("div",{className:"grid grid-rows-[auto_auto_2fr_auto] h-screen min-w-full bg-gray-700 gap-1 p-2",children:[i.jsxs("div",{children:[i.jsx(Re,{}),i.jsx(Te,{setMessage:t})]}),i.jsx("div",{className:"h-28",children:i.jsx(Fe,{message:e})}),i.jsx("div",{className:"grid grid-rows-1 gap-1",children:i.jsx("div",{className:"grid grid-cols-1 gap-1",children:i.jsx(tt,{})})}),i.jsx("div",{className:"h-28",children:i.jsx(rt,{})})]})};ee(document.getElementById("root")).render(i.jsx(a.StrictMode,{children:i.jsx(nt,{})}));
